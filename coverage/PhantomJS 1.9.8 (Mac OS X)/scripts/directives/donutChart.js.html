<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for scripts/directives/donutChart.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../prettify.css">
    <link rel="stylesheet" href="../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">scripts/directives/donutChart.js</span></h1>
    <h2>
        Statements: <span class="metric">7.89% <small>(3 / 38)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">0% <small>(0 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">0% <small>(0 / 9)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">7.89% <small>(3 / 38)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../index.html">All files</a> &#187; <a href="index.html">scripts/directives/</a> &#187; donutChart.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
angular.module('crackooApp').directive('donutChart', [
  '$location',
  '$window',
<span class="fstat-no" title="function not covered" >  function ($location, $window) {</span>
<span class="cstat-no" title="statement not covered" >    return {</span>
      restrict: 'EA',
      template: '&lt;svg width=\'110\' height=\'110\'&gt;&lt;/svg&gt;',
      scope: {
        chartData: '@',
        chartType: '@'
      },
      link: <span class="fstat-no" title="function not covered" >function postLink(scope, element) {</span>
<span class="cstat-no" title="statement not covered" >        var width = 110, height = 110, text_y = '.35em', duration = 500;</span>
        //var transition = 200;
<span class="cstat-no" title="statement not covered" >        var d3 = $window.d3;</span>
<span class="cstat-no" title="statement not covered" >        var rawSvg = element.find('svg')[0];</span>
        //                var svg = d3.select(rawSvg);
<span class="cstat-no" title="statement not covered" >        var percentage = parseInt(scope.chartData);</span>
<span class="fstat-no" title="function not covered" >        function drawChart(percent) {</span>
<span class="cstat-no" title="statement not covered" >          var dataset = {</span>
              lower: calcPercent(0),
              upper: calcPercent(percent)
            }, radius = Math.min(width, height) / 2, pie = d3.layout.pie().sort(null), format = d3.format('.0%');
<span class="cstat-no" title="statement not covered" >          var arc = d3.svg.arc().innerRadius(radius * 0.65).outerRadius(radius * 0.85);</span>
<span class="cstat-no" title="statement not covered" >          var overLapArc = d3.svg.arc().innerRadius(radius * 0.66).outerRadius(radius * 0.84).startAngle(0).endAngle(360);</span>
<span class="cstat-no" title="statement not covered" >          var svg = d3.select(rawSvg).append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');</span>
<span class="cstat-no" title="statement not covered" >          svg.append('path').attr('id', 'innerRing').attr('d', overLapArc).style('stroke', 'white');</span>
          //                        .attr("transform","translate("+width+","+height-(height/2)+")");
<span class="cstat-no" title="statement not covered" >          var colors = [</span>
            '#f4f8fb',
            '#7ebd4a',
            '#2f3640'
          ];
<span class="cstat-no" title="statement not covered" >          var path = svg.selectAll('.outer-ring').data(pie(dataset.lower)).enter().append('path').attr('class', 'outer-ring').style('fill', <span class="fstat-no" title="function not covered" >function (d, i) {</span></span>
            //                            arrpos.push(arc.centroid(d));
            //                            console.log(arrpos) ;
<span class="cstat-no" title="statement not covered" >            var style = colors[0];</span>
<span class="cstat-no" title="statement not covered" >            if (i === 0) {</span>
<span class="cstat-no" title="statement not covered" >              if (scope.chartType === 'correct') {</span>
<span class="cstat-no" title="statement not covered" >                style = colors[1];</span>
              } else {
<span class="cstat-no" title="statement not covered" >                style = colors[2];</span>
              }
            }
<span class="cstat-no" title="statement not covered" >            return style;</span>
          }).attr('d', arc).each(<span class="fstat-no" title="function not covered" >function (d) {</span>
<span class="cstat-no" title="statement not covered" >            this._current = d;</span>
          });
          // store the initial values
<span class="cstat-no" title="statement not covered" >          var text = svg.append('text').attr('id', 'textPercentage').attr('text-anchor', 'middle').attr('dy', text_y);</span>
<span class="cstat-no" title="statement not covered" >          if (typeof percent === 'string') {</span>
<span class="cstat-no" title="statement not covered" >            text.text(percent);</span>
          } else {
<span class="cstat-no" title="statement not covered" >            var progress = 0;</span>
<span class="cstat-no" title="statement not covered" >            var timeout = setTimeout(<span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >              clearTimeout(timeout);</span>
<span class="cstat-no" title="statement not covered" >              path = path.data(pie(dataset.upper));</span>
              // update the data
<span class="cstat-no" title="statement not covered" >              path.transition().duration(duration).attrTween('d', <span class="fstat-no" title="function not covered" >function (a) {</span></span>
                // Store the displayed angles in _current.
                // Then, interpolate from _current to the new angles.
                // During the transition, _current is updated in-place by d3.interpolate.
<span class="cstat-no" title="statement not covered" >                var i = d3.interpolate(this._current, a);</span>
<span class="cstat-no" title="statement not covered" >                var i2 = d3.interpolate(progress, percent);</span>
<span class="cstat-no" title="statement not covered" >                this._current = i(0);</span>
<span class="cstat-no" title="statement not covered" >                return <span class="fstat-no" title="function not covered" >function (t) {</span></span>
<span class="cstat-no" title="statement not covered" >                  text.text(format(i2(t) / 100));</span>
<span class="cstat-no" title="statement not covered" >                  return arc(i(t));</span>
                };
              });  // redraw the arcs
            }, 200);
          }
        }
<span class="cstat-no" title="statement not covered" >        drawChart(percentage);</span>
<span class="fstat-no" title="function not covered" >        function calcPercent(percent) {</span>
<span class="cstat-no" title="statement not covered" >          return [</span>
            percent,
            100 - percent
          ];
        }
      }
    };
  }
]);
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jun 09 2015 16:01:27 GMT-0700 (PDT)</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
